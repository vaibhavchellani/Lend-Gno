

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; pm-js  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pm-js  documentation" href="index.html"/>
        <link rel="prev" title="Contributing Guide" href="contributing-guide.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pm-js
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-overview.html">API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="events-oracles-and-markets.html">Events, Oracles and Markets</a></li>
<li class="toctree-l1"><a class="reference internal" href="lmsr-primer.html">LMSR Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing-guide.html">Contributing Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pm-js</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api-reference.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="Gnosis">
<em class="property">class </em><code class="descname">Gnosis</code><span class="sig-paren">(</span><em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#Gnosis" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the Gnosis Prediction Markets JS Library API</p>
<p><strong>Warning:</strong> Do not use constructor directly. Some asynchronous initialization will not be handled. Instead, use Gnosis.create.</p>
<dl class="attribute">
<dt id="Gnosis.contracts">
<code class="descclassname">Gnosis.</code><code class="descname">contracts</code><a class="headerlink" href="#Gnosis.contracts" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of Truffle contract abstractions for the following Gnosis contracts:</p>
<ul class="simple">
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/Math.html">Math</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/Event.html">Event</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/CategoricalEvent.html">CategoricalEvent</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/ScalarEvent.html">ScalarEvent</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/EventFactory.html">EventFactory</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/Token.html">Token</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/HumanFriendlyToken.html">HumanFriendlyToken</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/EtherToken.html">Ether Token</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/CentralizedOracle.html">CentralizedOracle</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/CentralizedOracleFactory.html">CentralizedOracleFactory</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/UltimateOracle.html">UltimateOracle</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/UltimateOracleFactory.html">UltimateOracleFactory</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/LMSRMarketMaker.html">LMSR Market Maker</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/Market.html">Market</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarket.html">StandardMarket</a></li>
<li><a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarketFactory.html">Standard Market Factory</a></li>
</ul>
<p>These are configured to use the web3 provider specified in Gnosis.create or subsequently modified with Gnosis.setWeb3Provider. The default gas costs for these abstractions are set to the maximum cost of their respective entries found in the <cite>gas-stats.json</cite> file built from the <a class="reference external" href="https://github.com/gnosis/pm-contracts#readme">core contracts</a>. Additionally, the default message sender (i.e. <cite>from</cite> address) is set via the optional <cite>defaultAccount</cite> param in Gnosis.setWeb3Provider.</p>
</dd></dl>

<dl class="function">
<dt id="Gnosis.create">
<code class="descclassname">Gnosis.</code><code class="descname">create</code><span class="sig-paren">(</span><em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#Gnosis.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function for asynchronously creating an instance of the API</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.ethereum</strong> (<em>string|Provider</em>) – An instance of a Web3 provider or a URL of a Web3 HTTP provider. If not specified, Web3 provider will be either the browser-injected Web3 (Mist/MetaMask) or an HTTP provider looking at <a class="reference external" href="http://localhost:8545">http://localhost:8545</a></li>
<li><strong>opts.defaultAccount</strong> (<em>string</em>) – The account to use as the default <cite>from</cite> address for ethereum transactions conducted through the Web3 instance. If unspecified, will be the first account found on Web3. See Gnosis.setWeb3Provider <cite>defaultAccount</cite> parameter for more info.</li>
<li><strong>opts.ipfs</strong> (<em>Object</em>) – ipfs-mini configuration object</li>
<li><strong>opts.ipfs.host</strong> (<em>string</em>) – IPFS node address</li>
<li><strong>opts.ipfs.port</strong> (<em>Number</em>) – IPFS protocol port</li>
<li><strong>opts.ipfs.protocol</strong> (<em>string</em>) – IPFS protocol name</li>
<li><strong>opts.logger</strong> (<em>function</em>) – A callback for logging. Can also provide ‘console’ to use <cite>console.log</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Gnosis</strong> – An instance of the pm.js API</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="Gnosis.defaultAccount">
<code class="descclassname">Gnosis.</code><code class="descname">defaultAccount</code><a class="headerlink" href="#Gnosis.defaultAccount" title="Permalink to this definition">¶</a></dt>
<dd><p>The default account to be used as the <cite>from</cite> address for transactions done with this Gnosis instance. If there is no account, this will not be set.</p>
</dd></dl>

<dl class="attribute">
<dt id="Gnosis.etherToken">
<code class="descclassname">Gnosis.</code><code class="descname">etherToken</code><a class="headerlink" href="#Gnosis.etherToken" title="Permalink to this definition">¶</a></dt>
<dd><p>If on mainnet, this will be an EtherToken contract abstraction pointing to the <a class="reference external" href="https://etherscan.io/address/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2#code">MakerDAO WETH contract</a>.</p>
<p>Otherwise, if <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/EtherToken.html">EtherToken</a> is deployed to the current network, this will be set to an EtherToken contract abstraction pointing at the deployment address.</p>
</dd></dl>

<dl class="function">
<dt id="Gnosis.importContracts">
<code class="descclassname">Gnosis.</code><code class="descname">importContracts</code><span class="sig-paren">(</span><em>artifacts</em>, <em>instanceNames</em><span class="sig-paren">)</span><a class="headerlink" href="#Gnosis.importContracts" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports contracts into this Gnosis instance using an object mapping contract names to their corresponding Truffle artifacts. Additionally, attempt to set attributes on the Gnosis instance corresponding to <cite>instanceNames</cite>.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>artifacts</strong> (<em>Object</em>) – Object mapping contract names to Truffle artifacts.</li>
<li><strong>instanceNames</strong> (<em>Object</em>) – Object mapping contract names to the name of an attribute on the Gnosis instance which will represent the deployed version of the contract, analogous to <a class="reference internal" href="#Gnosis.standardMarketFactory" title="Gnosis.standardMarketFactory"><code class="xref js js-attr docutils literal notranslate"><span class="pre">standardMarketFactory</span></code></a> or <a class="reference internal" href="#Gnosis.lmsrMarketMaker" title="Gnosis.lmsrMarketMaker"><code class="xref js js-attr docutils literal notranslate"><span class="pre">lmsrMarketMaker</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="Gnosis.lmsrMarketMaker">
<code class="descclassname">Gnosis.</code><code class="descname">lmsrMarketMaker</code><a class="headerlink" href="#Gnosis.lmsrMarketMaker" title="Permalink to this definition">¶</a></dt>
<dd><p>If <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/LMSRMarketMaker.html">LMSRMarketMaker</a> is deployed to the current network, this will be set to an LMSRMarketMaker contract abstraction pointing at the deployment address.</p>
</dd></dl>

<dl class="function">
<dt id="Gnosis.setWeb3Provider">
<code class="descclassname">Gnosis.</code><code class="descname">setWeb3Provider</code><span class="sig-paren">(</span><em>provider</em>, <em>defaultAccount</em><span class="sig-paren">)</span><a class="headerlink" href="#Gnosis.setWeb3Provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Setter for the ethereum web3 provider.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>provider</strong> (<em>string|Provider</em>) – An instance of a Web3 provider or a URL of a Web3 HTTP provider. If not specified, Web3 provider will be either the browser-injected Web3 (Mist/MetaMask) or an HTTP provider looking at <a class="reference external" href="http://localhost:8545">http://localhost:8545</a></li>
<li><strong>defaultAccount</strong> (<em>string</em>) – An address to be used as the default <cite>from</cite> account for conducting transactions using the associated Web3 instance. If not specified, will be inferred from Web3 using the first account obtained by <cite>web3.eth.getAccounts</cite>. If no such account exists, default account will not be set.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="Gnosis.standardMarketFactory">
<code class="descclassname">Gnosis.</code><code class="descname">standardMarketFactory</code><a class="headerlink" href="#Gnosis.standardMarketFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>If <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarketFactory.html">StandardMarketFactory</a> is deployed to the current network, this will be set to an StandardMarketFactory contract abstraction pointing at the deployment address.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="methods">
<h2>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="calcLMSRCost">
<code class="descname">calcLMSRCost</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcLMSRCost" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the cost of buying specified number of outcome tokens from LMSR market. Unfunded markets will be handled as a special case, returning the outcomeTokenCount passed plus its corresponding fee fee.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.netOutcomeTokensSold</strong> (<em>Array.&lt;number&gt;|Array.&lt;string&gt;|Array.&lt;BigNumber&gt;</em>) – Amounts of net outcome tokens that have been sold. Negative amount means more have been bought than sold.</li>
<li><strong>opts.funding</strong> (<em>number|string|BigNumber</em>) – The amount of funding market has</li>
<li><strong>opts.outcomeTokenIndex</strong> (<em>number|string|BigNumber</em>) – The index of the outcome</li>
<li><strong>opts.outcomeTokenCount</strong> (<em>number|string|BigNumber</em>) – The number of outcome tokens to buy</li>
<li><strong>opts.feeFactor</strong> (<em>number|string|BigNumber</em>) – The fee factor. Specifying 1,000,000 corresponds to 100%, 50,000 corresponds to 5%, etc.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Decimal</strong> – The cost of the outcome tokens in event collateral tokens</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="calcLMSRMarginalPrice">
<code class="descname">calcLMSRMarginalPrice</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcLMSRMarginalPrice" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the marginal price of outcome token. Unfunded markets with no outcome tokens sold will be handled as a special case, returning (1 / number of outcomes sold).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.netOutcomeTokensSold</strong> (<em>Array.&lt;Number&gt;|Array.&lt;string&gt;|Array.&lt;BigNumber&gt;</em>) – Amounts of net outcome tokens that have been sold. Negative amount means more have been bought than sold.</li>
<li><strong>opts.funding</strong> (<em>number|string|BigNumber</em>) – The amount of funding market has</li>
<li><strong>opts.outcomeTokenIndex</strong> (<em>number|string|BigNumber</em>) – The index of the outcome</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Decimal</strong> – The marginal price of outcome tokens. Will differ from actual price, which varies with quantity being moved.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="calcLMSROutcomeTokenCount">
<code class="descname">calcLMSROutcomeTokenCount</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcLMSROutcomeTokenCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates the number of outcome tokens which can be purchased by specified amount of collateral.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.netOutcomeTokensSold</strong> (<em>Array.&lt;Number&gt;|Array.&lt;string&gt;|Array.&lt;BigNumber&gt;</em>) – Amounts of net outcome tokens that have been sold. Negative amount means more have been bought than sold.</li>
<li><strong>opts.funding</strong> (<em>number|string|BigNumber</em>) – The amount of funding market has</li>
<li><strong>opts.outcomeTokenIndex</strong> (<em>number|string|BigNumber</em>) – The index of the outcome</li>
<li><strong>opts.cost</strong> (<em>number|string|BigNumber</em>) – The amount of collateral for buying tokens</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Decimal</strong> – The number of outcome tokens that can be bought</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="calcLMSRProfit">
<code class="descname">calcLMSRProfit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcLMSRProfit" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimates profit from selling specified number of outcome tokens to LMSR market.Unfunded markets will be handled as a special case, returning no profit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.netOutcomeTokensSold</strong> (<em>Array.&lt;number&gt;|Array.&lt;string&gt;|Array.&lt;BigNumber&gt;</em>) – Amounts of net outcome tokens that have been sold by the market already. Negative amount means more have been sold to the market than sold by the market.</li>
<li><strong>opts.funding</strong> (<em>number|string|BigNumber</em>) – The amount of funding market has</li>
<li><strong>opts.outcomeTokenIndex</strong> (<em>number|string|BigNumber</em>) – The index of the outcome</li>
<li><strong>opts.outcomeTokenCount</strong> (<em>number|string|BigNumber</em>) – The number of outcome tokens to sell</li>
<li><strong>opts.feeFactor</strong> (<em>number|string|BigNumber</em>) – The fee factor. Specifying 1,000,000 corresponds to 100%, 50,000 corresponds to 5%, etc.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Decimal</strong> – The profit from selling outcome tokens in event collateral tokens</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="create">
<code class="descname">create</code><span class="sig-paren">(</span><em>opts</em><span class="sig-paren">)</span><a class="headerlink" href="#create" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory function for asynchronously creating an instance of the API</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.ethereum</strong> (<em>string|Provider</em>) – An instance of a Web3 provider or a URL of a Web3 HTTP provider. If not specified, Web3 provider will be either the browser-injected Web3 (Mist/MetaMask) or an HTTP provider looking at <a class="reference external" href="http://localhost:8545">http://localhost:8545</a></li>
<li><strong>opts.defaultAccount</strong> (<em>string</em>) – The account to use as the default <cite>from</cite> address for ethereum transactions conducted through the Web3 instance. If unspecified, will be the first account found on Web3. See Gnosis.setWeb3Provider <cite>defaultAccount</cite> parameter for more info.</li>
<li><strong>opts.ipfs</strong> (<em>Object</em>) – ipfs-mini configuration object</li>
<li><strong>opts.ipfs.host</strong> (<em>string</em>) – IPFS node address</li>
<li><strong>opts.ipfs.port</strong> (<em>Number</em>) – IPFS protocol port</li>
<li><strong>opts.ipfs.protocol</strong> (<em>string</em>) – IPFS protocol name</li>
<li><strong>opts.logger</strong> (<em>function</em>) – A callback for logging. Can also provide ‘console’ to use <cite>console.log</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Gnosis</strong> – An instance of the pm.js API</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="requireEventFromTXResult">
<code class="descname">requireEventFromTXResult</code><span class="sig-paren">(</span><em>result</em>, <em>eventName</em><span class="sig-paren">)</span><a class="headerlink" href="#requireEventFromTXResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks for a single event in the logs of a transaction result. If no such events or multiple matching events are found, throws an error. Otherwise returns the matching event log.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>result</strong> (<em>Transaction</em>) – Result of sending a transaction</li>
<li><strong>eventName</strong> (<em>string</em>) – Name of the event</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Object</strong> – The matching event log found</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="buyOutcomeTokens">
<code class="descname">buyOutcomeTokens</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buyOutcomeTokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Buys outcome tokens. If you have ether and plan on transacting with a market on an event which
uses EtherToken as collateral, be sure to convert the ether into EtherToken by sending ether to
the deposit() method of the contract. For other ERC20 collateral tokens, follow the token’s
acquisition process defined by the token’s contract.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.market</strong> (<em>Contract|string</em>) – The market to buy tokens from</li>
<li><strong>opts.outcomeTokenIndex</strong> (<em>number|string|BigNumber</em>) – The index of the outcome</li>
<li><strong>opts.outcomeTokenCount</strong> (<em>number|string|BigNumber</em>) – Number of outcome tokens to buy</li>
<li><strong>opts.limitMargin</strong> (<em>number|string|BigNumber</em>) – Because transactions change prices, there is a chance that the cost limit for the buy, which is set to the cost according to the latest mined block, will prevent the buy transaction from succeeding. This parameter can be used to increase the cost limit by a fixed proportion. For example, specifying <cite>limitMargin: 0.05</cite> will make the cost limit increase by 5%.</li>
<li><strong>opts.cost</strong> (<em>number|string|BigNumber</em>) – Overrides the cost limit supplied to the market contract which is derived from the latest block state of the market along with the <cite>outcomeTokenCount</cite> and <cite>limitMargin</cite> parameters.</li>
<li><strong>opts.approvalAmount</strong> (<em>number|string|BigNumber</em>) – Amount of collateral to allow market to spend. If unsupplied or null, allowance will be reset to the <cite>approvalResetAmount</cite> only if necessary. If set to 0, the approval transaction will be skipped.</li>
<li><strong>opts.approvalResetAmount</strong> (<em>number|string|BigNumber</em>) – Set to this amount when resetting market collateral allowance. If unsupplied or null, will be the cost of this transaction.</li>
<li><strong>opts.approveTxOpts</strong> (<em>Object</em>) – Extra transaction options for the approval transaction if it occurs. These options override the options specified in sibling properties of the parameter object.</li>
<li><strong>opts.buyTxOpts</strong> (<em>Object</em>) – Extra transaction options for the buy transaction. These options override the options specified in sibling properties of the parameter object.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>BigNumber</strong> – How much collateral tokens caller paid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="createCategoricalEvent">
<code class="descname">createCategoricalEvent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#createCategoricalEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a categorical event.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.collateralToken</strong> (<em>Contract|string</em>) – The collateral token contract or its address</li>
<li><strong>opts.oracle</strong> (<em>Contract|string</em>) – The oracle responsible for resolving this event</li>
<li><strong>opts.outcomeCount</strong> (<em>number|string|BigNumber</em>) – The number of outcomes of this event</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Contract</strong> – The created categorical event</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="createCentralizedOracle">
<code class="descname">createCentralizedOracle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#createCentralizedOracle" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a centralized oracle linked to a published event.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>ipfsHash</strong> (<em>string</em>) – The published event’s IPFS hash</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Contract</strong> – The created centralized oracle contract instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="createMarket">
<code class="descname">createMarket</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#createMarket" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a market.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.event</strong> (<em>Contract|string</em>) – The forwarded oracle contract or its address</li>
<li><strong>opts.marketMaker</strong> (<em>Contract|string</em>) – The collateral token contract or its address</li>
<li><strong>opts.fee</strong> (<em>number|string|BigNumber</em>) – The fee factor. Specifying 1,000,000 corresponds to 100%, 50,000 corresponds to 5%, etc.</li>
<li><strong>opts.marketFactory</strong> (<em>Contract|string</em>) – The factory contract</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Contract</strong> – The created market contract instance. If marketFactory is <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarketFactory.html">StandardMarketFactory</a>, this should be a <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarket.html">StandardMarket</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="createScalarEvent">
<code class="descname">createScalarEvent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#createScalarEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a scalar event.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.collateralToken</strong> (<em>Contract|string</em>) – The collateral token contract or its address</li>
<li><strong>opts.oracle</strong> (<em>Contract|string</em>) – The oracle responsible for resolving this event</li>
<li><strong>opts.lowerBound</strong> (<em>number|string|BigNumber</em>) – The lower bound for the event outcome</li>
<li><strong>opts.upperBound</strong> (<em>number|string|BigNumber</em>) – The upper bound for the event outcome</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Contract</strong> – The created scalar event</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="createUltimateOracle">
<code class="descname">createUltimateOracle</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#createUltimateOracle" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an ultimate oracle.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.forwardedOracle</strong> (<em>Contract|string</em>) – The forwarded oracle contract or its address</li>
<li><strong>opts.collateralToken</strong> (<em>Contract|string</em>) – The collateral token contract or its address</li>
<li><strong>opts.spreadMultiplier</strong> (<em>number|string|BigNumber</em>) – The spread multiplier</li>
<li><strong>opts.challengePeriod</strong> (<em>number|string|BigNumber</em>) – The challenge period in seconds</li>
<li><strong>opts.challengeAmount</strong> (<em>number|string|BigNumber</em>) – The amount of collateral tokens put at stake in the challenge</li>
<li><strong>opts.frontRunnerPeriod</strong> (<em>number|string|BigNumber</em>) – The front runner period in seconds</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Contract</strong> – The created ultimate oracle contract instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="loadEventDescription">
<code class="descname">loadEventDescription</code><span class="sig-paren">(</span><em>ipfsHash</em><span class="sig-paren">)</span><a class="headerlink" href="#loadEventDescription" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads an event description from IPFS.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>ipfsHash</strong> (<em>string</em>) – The IPFS hash locating the published event</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>Object</strong> – A POD object describing the event</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="publishEventDescription">
<code class="descname">publishEventDescription</code><span class="sig-paren">(</span><em>description</em><span class="sig-paren">)</span><a class="headerlink" href="#publishEventDescription" title="Permalink to this definition">¶</a></dt>
<dd><p>Publishes an event description onto IPFS.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>eventDescription</strong> (<em>Object</em>) – A POD object describing the event</li>
<li><strong>eventDescription.title</strong> (<em>string</em>) – A string describing the title of the event</li>
<li><strong>eventDescription.description</strong> (<em>string</em>) – A string describing the purpose of the event</li>
<li><strong>eventDescription.resolutionDate</strong> (<em>string</em>) – A string containing the resolution date of the event</li>
<li><strong>eventDescription.outcomes</strong> (<em>Array.&lt;string&gt;</em>) – A string array containing the outcomes of the event</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>string</strong> – The IPFS hash locating the published event</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="resolveEvent">
<code class="descname">resolveEvent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#resolveEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves an event. Assumes event is backed solely by a centralized oracle controlled by you</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>opts.event</strong> (<em>Contract|string</em>) – The event address or instance</li>
<li><strong>opts.outcome</strong> (<em>number|string|BigNumber</em>) – The outcome to set this event to. This is the zero-based index of the outcome for categorical events and the decimals-adjusted value of the outcome for scalar events.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sellOutcomeTokens">
<code class="descname">sellOutcomeTokens</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sellOutcomeTokens" title="Permalink to this definition">¶</a></dt>
<dd><p>Sells outcome tokens. If transacting with a market which deals with EtherToken as collateral,
will need additional step of sending a withdraw(uint amount) transaction to the EtherToken
contract if raw ether is desired.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first simple">
<li><strong>opts.market</strong> (<em>Contract|string</em>) – The market to sell tokens to</li>
<li><strong>opts.outcomeTokenIndex</strong> (<em>number|string|BigNumber</em>) – The index of the outcome</li>
<li><strong>opts.outcomeTokenCount</strong> (<em>number|string|BigNumber</em>) – Number of outcome tokens to sell</li>
<li><strong>opts.limitMargin</strong> (<em>number|string|BigNumber</em>) – Because transactions change profits, there is a chance that the profit limit for the sell, which is set to the profit according to the latest mined block, will prevent the sell transaction from succeeding. This parameter can be used to decrease the profit limit by a fixed proportion. For example, specifying <cite>limitMargin: 0.05</cite> will make the profit limit decrease by 5%.</li>
<li><strong>opts.minProfit</strong> (<em>number|string|BigNumber</em>) – Overrides the minimum profit limit supplied to the market contract which is derived from the latest block state of the market along with the <cite>outcomeTokenCount</cite> and <cite>limitMargin</cite> parameters.</li>
<li><strong>opts.approvalAmount</strong> (<em>number|string|BigNumber</em>) – Amount of outcome tokens to allow market to handle. If unsupplied or null, allowance will be reset to the <cite>approvalResetAmount</cite> only if necessary. If set to 0, the approval transaction will be skipped.</li>
<li><strong>opts.approvalResetAmount</strong> (<em>number|string|BigNumber</em>) – Set to this amount when resetting market outcome token allowance. If unsupplied or null, will be the sale amount specified by <cite>outcomeTokenCount</cite>.</li>
<li><strong>opts.approveTxOpts</strong> (<em>Object</em>) – Extra transaction options for the approval transaction if it occurs. These options override the options specified in sibling properties of the parameter object.</li>
<li><strong>opts.sellTxOpts</strong> (<em>Object</em>) – Extra transaction options for the sell transaction. These options override the options specified in sibling properties of the parameter object.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>BigNumber</strong> – How much collateral tokens caller received from sale</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="setWeb3Provider">
<code class="descname">setWeb3Provider</code><span class="sig-paren">(</span><em>provider</em>, <em>defaultAccount</em><span class="sig-paren">)</span><a class="headerlink" href="#setWeb3Provider" title="Permalink to this definition">¶</a></dt>
<dd><p>Setter for the ethereum web3 provider.</p>
<p>Note: this method is asynchronous and will return a Promise</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Arguments:</th><td class="field-body"><ul class="first last simple">
<li><strong>provider</strong> (<em>string|Provider</em>) – An instance of a Web3 provider or a URL of a Web3 HTTP provider. If not specified, Web3 provider will be either the browser-injected Web3 (Mist/MetaMask) or an HTTP provider looking at <a class="reference external" href="http://localhost:8545">http://localhost:8545</a></li>
<li><strong>defaultAccount</strong> (<em>string</em>) – An address to be used as the default <cite>from</cite> account for conducting transactions using the associated Web3 instance. If not specified, will be inferred from Web3 using the first account obtained by <cite>web3.eth.getAccounts</cite>. If no such account exists, default account will not be set.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="contributing-guide.html" class="btn btn-neutral" title="Contributing Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gnosis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>