

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Events, Oracles and Markets &mdash; pm-js  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pm-js  documentation" href="index.html"/>
        <link rel="next" title="LMSR Primer" href="lmsr-primer.html"/>
        <link rel="prev" title="API Overview" href="api-overview.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pm-js
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-overview.html">API Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Events, Oracles and Markets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#questions-about-the-future-oracles-and-trust">Questions About the Future, Oracles, and Trust</a></li>
<li class="toctree-l2"><a class="reference internal" href="#events-and-collateral">Events and Collateral</a></li>
<li class="toctree-l2"><a class="reference internal" href="#markets-and-automated-market-makers">Markets and Automated Market Makers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#events-with-scalar-outcomes">Events with Scalar Outcomes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lmsr-primer.html">LMSR Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing-guide.html">Contributing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pm-js</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Events, Oracles and Markets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/events-oracles-and-markets.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="events-oracles-and-markets">
<span id="events-oracles-and-markets"></span><h1>Events, Oracles and Markets<a class="headerlink" href="#events-oracles-and-markets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="questions-about-the-future-oracles-and-trust">
<span id="questions-about-the-future-oracles-and-trust"></span><h2>Questions About the Future, Oracles, and Trust<a class="headerlink" href="#questions-about-the-future-oracles-and-trust" title="Permalink to this headline">¶</a></h2>
<p>A prediction predicts the outcome of a future event. For example, the event might be “the U.S. presidential election of 2016.” There may be predictions associated with each of the possible outcomes, but this event only had one of these outcome. Events like these with a discrete set of outcomes are considered to be categorical events. They may be phrased as a question with a choice of answers, e.g.:</p>
<p>Who will win the U.S. presidential election of 2016?</p>
<ul class="simple">
<li>Clinton</li>
<li>Trump</li>
<li>Other</li>
</ul>
<p>To ask this question with a prediction market on Gnosis, you must first upload the event description onto IPFS via <a class="reference external" href="api-reference.html#publishEventDescription">Gnosis.publishEventDescription</a>. This will asynchronously provide you with a hash value which can be used to locate the file on IPFS:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">gnosis</span><span class="p">,</span> <span class="nx">ipfsHash</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createDescription</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">gnosis</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
    <span class="nx">ipfsHash</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">publishEventDescription</span><span class="p">({</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Who will win the U.S. presidential election of 2016?&#39;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Every four years, the citizens of the United States vote for their next president...&#39;</span><span class="p">,</span>
        <span class="nx">resolutionDate</span><span class="o">:</span> <span class="s1">&#39;2016-11-08T23:00:00-05:00&#39;</span><span class="p">,</span>
        <span class="nx">outcomes</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Clinton&#39;</span><span class="p">,</span> <span class="s1">&#39;Trump&#39;</span><span class="p">,</span> <span class="s1">&#39;Other&#39;</span><span class="p">],</span>
    <span class="p">})</span>
    <span class="c1">// now the event description has been uploaded to ipfsHash and can be used</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">loadEventDescription</span><span class="p">(</span><span class="nx">ipfsHash</span><span class="p">)).</span><span class="nx">title</span> <span class="o">===</span>
        <span class="s1">&#39;Who will win the U.S. presidential election of 2016?&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Ipfs hash: https://ipfs.infura.io/api/v0/cat?stream-channels=true&amp;arg=</span><span class="si">${</span><span class="nx">ipfsHash</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">createDescription</span><span class="p">()</span>
</pre></div>
</div>
<p>Of course, future events will come to pass, and once they do, the outcome should be determinable. Oracles report on the outcome of events. The simplest oracle contract provided by Gnosis is a <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/CentralizedOracle.html"><code class="docutils literal notranslate"><span class="pre">CentralizedOracle</span></code></a>, and it is controlled by a single entity: the <code class="docutils literal notranslate"><span class="pre">owner</span></code> of the contract, which is a single Ethereum address, and which will from this point forward in this guide be referred to as the centralized oracle itself.</p>
<p>To create a centralized oracle, use <a class="reference external" href="api-reference.html#createCentralizedOracle">Gnosis.createCentralizedOracle</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="c1">// After obtaining an instance of Gnosis (api-reference.html#Gnosis) as &quot;gnosis&quot; and &quot;ipfsHash&quot; from Gnosis.publishEventDescription (api-reference.html#publishEventDescription)</span>
<span class="kd">let</span> <span class="nx">oracle</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createOracle</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">oracle</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">createCentralizedOracle</span><span class="p">(</span><span class="nx">ipfsHash</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Oracle created with address </span><span class="si">${</span><span class="nx">oracle</span><span class="p">.</span><span class="nx">address</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">createOracle</span><span class="p">()</span>
</pre></div>
</div>
<p>After <code class="docutils literal notranslate"><span class="pre">createCentralizedOracle</span></code> finishes, the owner of the CentralizedOracle contract instance created will be the message sender, or the default account for all transactions in the Gnosis instance (which is normally set to the first account exposed by the Web3 provider).</p>
<p>By no means is the CentralizedOracle the only possible oracle design which can be used with Gnosis. Any oracle which implements the <a class="reference external" href="https://github.com/gnosis/pm-contracts/blob/master/contracts/Oracles/Oracle.sol"><code class="docutils literal notranslate"><span class="pre">Oracle</span></code></a> contract interface may be used.</p>
</div>
<div class="section" id="events-and-collateral">
<span id="events-and-collateral"></span><h2>Events and Collateral<a class="headerlink" href="#events-and-collateral" title="Permalink to this headline">¶</a></h2>
<p>Once an oracle is created, an event contract may defer to the oracle’s judgment. The <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/CategoricalEvent.html"><code class="docutils literal notranslate"><span class="pre">CategoricalEvent</span></code></a> and <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/ScalarEvent.html"><code class="docutils literal notranslate"><span class="pre">ScalarEvent</span></code></a> contracts represent an event. They also mint sets of outcome tokens corresponding to a collateral of an <a class="reference external" href="https://theethereum.wiki/w/index.php/ERC20_Token_Standard">ERC20</a>-compliant token. Once the relied-on oracle reports an outcome to the event, the outcome token corresponding to the reported outcome may be exchanged for the original collateral token.</p>
<p>Note that ether is <em>not</em> an ERC20-compliant token at the moment of this writing. It may be converted into an ERC20-compliant variant with an adaptor contract like <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/EtherToken.html">EtherToken</a> though. There is a deployed instance of EtherToken available in the API as <a class="reference external" href="api-reference.html#Gnosis.etherToken">Gnosis.etherToken</a>.</p>
<p>In order to create a categorical event contract instance backed by an specific <code class="docutils literal notranslate"><span class="pre">oracle</span></code>, use <a class="reference external" href="api-reference.html#createCategoricalEvent">Gnosis.createCategoricalEvent</a>. For example, a categorical event with three outcomes like the earlier example can be made like this:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">event</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createCategoricalEvent</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">createCategoricalEvent</span><span class="p">({</span>
        <span class="nx">collateralToken</span><span class="o">:</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">,</span>
        <span class="nx">oracle</span><span class="p">,</span>
        <span class="c1">// Note the outcomeCount must match the length of the outcomes array published on IPFS</span>
        <span class="nx">outcomeCount</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Categorical event created with address </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">address</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">createCategoricalEvent</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that EtherToken is traded with this particular event instance.</p>
<blockquote>
<div><p>If you are using the Rinkeby network, you can check that your event has been indexed by <a class="reference external" href="https://github.com/gnosis/pm-trading-db">pm-trading-db</a> with the following URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">pm</span><span class="o">-</span><span class="n">trading</span><span class="o">-</span><span class="n">db</span><span class="o">.</span><span class="n">rinkeby</span><span class="o">.</span><span class="n">gnosis</span><span class="o">.</span><span class="n">pm</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">events</span><span class="o">/</span><span class="n">EVENT_ADDRESS</span>
</pre></div>
</div>
<p>Be sure to substitute in the actual event address for <code class="docutils literal notranslate"><span class="pre">EVENT_ADDRESS</span></code></p>
</div></blockquote>
<p>When an event has been created, users can convert their collateral into sets of outcome tokens. For example, suppose a user buys 4 ETH worth of outcome tokens from <code class="docutils literal notranslate"><span class="pre">event</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">buyAllOutcomes</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">depositValue</span> <span class="o">=</span> <span class="mi">4</span><span class="nx">e18</span> <span class="c1">// 4 ether</span>
    <span class="kr">const</span> <span class="nx">txResults</span> <span class="o">=</span> <span class="nx">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
        <span class="p">[</span><span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">deposit</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">({</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">depositValue</span> <span class="p">})],</span>
        <span class="p">[</span><span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">approve</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">depositValue</span><span class="p">)],</span>
        <span class="p">[</span><span class="nx">event</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">event</span><span class="p">.</span><span class="nx">buyAllOutcomes</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">(</span><span class="nx">depositValue</span><span class="p">)],</span>
    <span class="p">].</span><span class="nx">map</span><span class="p">(([</span><span class="nx">contract</span><span class="p">,</span> <span class="nx">txHash</span><span class="p">])</span> <span class="p">=&gt;</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">syncTransaction</span><span class="p">(</span><span class="nx">txHash</span><span class="p">)))</span>

    <span class="c1">// Make sure everything worked</span>
    <span class="kr">const</span> <span class="nx">expectedEvents</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;Deposit&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Approval&#39;</span><span class="p">,</span>
        <span class="s1">&#39;OutcomeTokenSetIssuance&#39;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="nx">txResults</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">txResult</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">requireEventFromTXResult</span><span class="p">(</span><span class="nx">txResult</span><span class="p">,</span> <span class="nx">expectedEvents</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
    <span class="p">})</span>
<span class="p">}</span>
<span class="nx">buyAllOutcomes</span><span class="p">()</span>
</pre></div>
</div>
<blockquote>
<div><p>The computation of <code class="docutils literal notranslate"><span class="pre">txResults</span></code> may appear to be fairly complex in the previous example, so here is a breakdown of that computation and why it was done that way.</p>
<p>At first, you may think of the following code:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">txResults</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">deposit</span><span class="p">({</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">depositValue</span> <span class="p">}),</span>
    <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">approve</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">depositValue</span><span class="p">),</span>
    <span class="nx">await</span> <span class="nx">event</span><span class="p">.</span><span class="nx">buyAllOutcomes</span><span class="p">(</span><span class="nx">depositValue</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This code would actually be just fine, and would work in place of the above, but would provide a flawed user experience. Users would have to wait for the <code class="docutils literal notranslate"><span class="pre">deposit</span></code> and <code class="docutils literal notranslate"><span class="pre">approve</span></code> transactions to <em>mine</em> before the next transaction is even sent, and on the Ethereum mainnet, this could take 15-30s between each transaction!</p>
<p>Then, you may propose:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">txResults</span> <span class="o">=</span> <span class="nx">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">deposit</span><span class="p">({</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">depositValue</span> <span class="p">}),</span>
    <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">approve</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">depositValue</span><span class="p">),</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">buyAllOutcomes</span><span class="p">(</span><span class="nx">depositValue</span><span class="p">),</span>
<span class="p">])</span>
</pre></div>
</div>
<p>Indeed, all the transactions are sent to the provider and mined simultaneously, but there is no order to them. In practice, this usually means it is up to the user to sign the transactions in order: this is also a flawed user experience, as there is only one order here which makes any sense.</p>
<p>This is why we send in the transactions like so:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">txHash</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">deposit</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">({</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">depositValue</span> <span class="p">})</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sendTransaction</span></code> variant of these Truffle methods only wait until the transaction hash is determined. Since the transaction hash is partially derived from the user’s account nonce, we can ensure that the transactions are processed in order. Then, we can wait for all of the transactions we sent in to mine:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">txResults</span> <span class="o">=</span> <span class="nx">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span><span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">syncTransaction</span><span class="p">(</span><span class="nx">depositTransactionHash</span><span class="p">),</span> <span class="p">...])</span>
</pre></div>
</div>
<p>You may notice that the constructor of the contract instance was used to call a method <code class="docutils literal notranslate"><span class="pre">syncTransaction</span></code>. That constructor is the same as the contract type abstraction, that is: <code class="docutils literal notranslate"><span class="pre">gnosis.etherToken.constructor</span> <span class="pre">===</span> <span class="pre">gnosis.contracts.EtherToken</span></code>. This is not an official method of <code class="docutils literal notranslate"><span class="pre">truffle-contract</span></code> yet! For more information, see <a class="reference external" href="https://github.com/trufflesuite/truffle-contract/pull/73">this pull request</a>.</p>
</div></blockquote>
<p>After executing a <code class="docutils literal notranslate"><span class="pre">buyAllOutcomes</span></code> transaction as above, the user would then have <code class="docutils literal notranslate"><span class="pre">4e18</span></code> units of each <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/OutcomeToken.html"><code class="docutils literal notranslate"><span class="pre">OutcomeToken</span></code></a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">checkBalances</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">Token</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">contracts</span>
    <span class="kr">const</span> <span class="nx">outcomeCount</span> <span class="o">=</span> <span class="p">(</span><span class="nx">await</span> <span class="nx">event</span><span class="p">.</span><span class="nx">getOutcomeCount</span><span class="p">()).</span><span class="nx">valueOf</span><span class="p">()</span>

    <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">outcomeCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">outcomeToken</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">Token</span><span class="p">.</span><span class="nx">at</span><span class="p">(</span><span class="nx">await</span> <span class="nx">event</span><span class="p">.</span><span class="nx">outcomeTokens</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Have&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">await</span> <span class="nx">outcomeToken</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">gnosis</span><span class="p">.</span><span class="nx">defaultAccount</span><span class="p">)).</span><span class="nx">valueOf</span><span class="p">(),</span> <span class="s1">&#39;units of outcome&#39;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">checkBalances</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, if you are the centralized oracle for an <code class="docutils literal notranslate"><span class="pre">event</span></code> contract which refers to the 2016 U.S. presidential election as set up above, you can report the outcome of the event as “Trump” and allow stakeholders to settle their claims with <a class="reference external" href="api-reference.html#resolveEvent">Gnosis.resolveEvent</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">resolve</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">resolveEvent</span><span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">outcome</span><span class="o">:</span> <span class="mi">1</span> <span class="p">})</span>
<span class="p">}</span>
<span class="nx">resolve</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that you must pass in the 0-based index of the outcome corresponding to the event description published on IPFS (“Trump” has index 1 in the example <code class="docutils literal notranslate"><span class="pre">['Clinton',</span> <span class="pre">'Trump',</span> <span class="pre">'Other']</span></code>),</p>
<p>If you are a stakeholder in this <code class="docutils literal notranslate"><span class="pre">event</span></code> contract instance, you can redeem your winnings with <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/CategoricalEvent.html"><code class="docutils literal notranslate"><span class="pre">CategoricalEvent.redeemWinnings</span></code></a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">redeem</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">requireEventFromTXResult</span><span class="p">(</span><span class="nx">await</span> <span class="nx">event</span><span class="p">.</span><span class="nx">redeemWinnings</span><span class="p">(),</span> <span class="s1">&#39;WinningsRedemption&#39;</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">redeem</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="markets-and-automated-market-makers">
<span id="markets-and-automated-market-makers"></span><h2>Markets and Automated Market Makers<a class="headerlink" href="#markets-and-automated-market-makers" title="Permalink to this headline">¶</a></h2>
<p>Suppose that Alice believed Clinton would win the 2016 U.S. election, but Bob believed Trump would win that election. With the machinery we’ve developed thus far, both Alice and Bob would have to buy outcome tokens and then trade each other based on their beliefs. Alice would give Trump tokens to Bob in exchange for Clinton tokens. When the oracle reports that the outcome of the election was Trump, the Trump tokens held by Bob can be exchanged for the collateral used to back those tokens.</p>
<p>However, it may be difficult to coordinate the trade. In order to create liquidity, an automated market maker may be used to operate an on-chain market. These markets also aggregate information from participants about their beliefs about the likeliness of outcomes.</p>
<p>Gnosis contracts contain market and market maker contract interfaces, a <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarket.html">standard market implementation</a>, and an <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/LMSRMarketMaker.html">implementation</a> of the <a class="reference external" href="https://mason.gmu.edu/~rhanson/mktscore.pdf">logarithmic market scoring rule (LMSR)</a>, an automated market maker. This can be leveraged with the <a class="reference external" href="api-reference.html#createMarket">Gnosis.createMarket</a> method. For example, given an <code class="docutils literal notranslate"><span class="pre">event</span></code>, you can create a <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarket.html"><code class="docutils literal notranslate"><span class="pre">StandardMarket</span></code></a> operated by the LMSR market maker with the following:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">market</span>
<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createMarket</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">market</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">createMarket</span><span class="p">({</span>
        <span class="nx">event</span><span class="p">,</span>
        <span class="nx">marketMaker</span><span class="o">:</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">lmsrMarketMaker</span><span class="p">,</span>
        <span class="nx">fee</span><span class="o">:</span> <span class="mi">50000</span> <span class="c1">// signifies a 5% fee on transactions</span>
            <span class="c1">// see docs at Gnosis.createMarket (api-reference.html#createMarket) for more info</span>
    <span class="p">})</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Market created with address </span><span class="si">${</span><span class="nx">market</span><span class="p">.</span><span class="nx">address</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">createMarket</span><span class="p">()</span>
</pre></div>
</div>
<p>Once a <code class="docutils literal notranslate"><span class="pre">market</span></code> has been created, it needs to be funded with the collateral token in order for it to provide liquidity. The market creator funds the market according to the maximum loss acceptable to them, which is possible since LMSR guarantees a bounded loss:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">fund</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Fund the market with 4 ETH</span>
    <span class="kr">const</span> <span class="nx">txResults</span> <span class="o">=</span> <span class="nx">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
        <span class="p">[</span><span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">deposit</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">({</span> <span class="nx">value</span><span class="o">:</span> <span class="mi">4</span><span class="nx">e18</span> <span class="p">})],</span>
        <span class="p">[</span><span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">.</span><span class="nx">approve</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">(</span><span class="nx">market</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="mi">4</span><span class="nx">e18</span><span class="p">)],</span>
        <span class="p">[</span><span class="nx">market</span><span class="p">.</span><span class="nx">constructor</span><span class="p">,</span> <span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">fund</span><span class="p">.</span><span class="nx">sendTransaction</span><span class="p">(</span><span class="mi">4</span><span class="nx">e18</span><span class="p">)],</span>
    <span class="p">].</span><span class="nx">map</span><span class="p">(([</span><span class="nx">contract</span><span class="p">,</span> <span class="nx">txHash</span><span class="p">])</span> <span class="p">=&gt;</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">syncTransaction</span><span class="p">(</span><span class="nx">txHash</span><span class="p">)))</span>

    <span class="kr">const</span> <span class="nx">expectedEvents</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;Deposit&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Approval&#39;</span><span class="p">,</span>
        <span class="s1">&#39;MarketFunding&#39;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="nx">txResults</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">txResult</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">requireEventFromTXResult</span><span class="p">(</span><span class="nx">txResult</span><span class="p">,</span> <span class="nx">expectedEvents</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
    <span class="p">})</span>
<span class="p">}</span>
<span class="nx">fund</span><span class="p">()</span>
</pre></div>
</div>
<p>Furthermore, the outcome tokens sold by the market are guaranteed to be backed by collateral because the ultimate source of these outcome tokens are from the event contract, which only allow buying collateral-backed sets of outcome tokens.</p>
<p>Let’s suppose there is a <code class="docutils literal notranslate"><span class="pre">market</span></code> on the 2016 presidential election as indicated above, and that you are wondering if “Other” outcome tokens (which have index 2) are worth it at its price point. You can estimate how much it would cost to buy <code class="docutils literal notranslate"><span class="pre">1e18</span></code> units of those outcome tokens with <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/LMSRMarketMaker.html"><code class="docutils literal notranslate"><span class="pre">LMSRMarketMaker.calcCost</span></code></a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">calcCost</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">cost</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">lmsrMarketMaker</span><span class="p">.</span><span class="nx">calcCost</span><span class="p">(</span><span class="nx">market2</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e18</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Buy 1 Outcome Token with index 2 costs </span><span class="si">${</span><span class="nx">cost</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span><span class="o">/</span><span class="mi">1</span><span class="nx">e18</span><span class="si">}</span><span class="sb"> ETH tokens`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">calcCost</span><span class="p">()</span>
</pre></div>
</div>
<p>Let’s say now that you’ve decided that these outcome tokens are worth it. pm-js contains convenience functions for buying and selling outcome tokens from a market backed by an LMSR market maker. They are <a class="reference external" href="api-reference.html#buyOutcomeTokens">Gnosis.buyOutcomeTokens</a> and <a class="reference external" href="api-reference.html#sellOutcomeTokens">Gnosis.sellOutcomeTokens</a>. To buy these outcome tokens, you can use the following code:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">buyOutcomeTokens</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">buyOutcomeTokens</span><span class="p">({</span>
        <span class="nx">market</span><span class="p">,</span>
        <span class="nx">outcomeTokenIndex</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">outcomeTokenCount</span><span class="o">:</span> <span class="mi">1</span><span class="nx">e18</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s1">&#39;Bought 1 Outcome Token of Outcome with index 2&#39;</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">buyOutcomeTokens</span><span class="p">()</span>
</pre></div>
</div>
<p>Similarly, you can see how much these outcome tokens are worth to the <code class="docutils literal notranslate"><span class="pre">market</span></code> with <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/LMSRMarketMaker.html"><code class="docutils literal notranslate"><span class="pre">LMSRMarketMaker.calcProfit</span></code></a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">calcProfit</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">profit</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">lmsrMarketMaker</span><span class="p">.</span><span class="nx">calcProfit</span><span class="p">(</span><span class="nx">market</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e18</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Sell 1 Outcome Token with index 2 gives </span><span class="si">${</span><span class="nx">profit</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span><span class="o">/</span><span class="mi">1</span><span class="nx">e18</span><span class="si">}</span><span class="sb"> ETH tokens of profit`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">calcProfit</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to sell the outcome tokens you have bought, you can do the following:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">sellOutcomeTokens</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">sellOutcomeTokens</span><span class="p">({</span>
        <span class="nx">market</span><span class="p">,</span>
        <span class="nx">outcomeTokenIndex</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">outcomeTokenCount</span><span class="o">:</span> <span class="mi">1</span><span class="nx">e18</span><span class="p">,</span>
    <span class="p">})</span>
<span class="p">}</span>
<span class="nx">sellOutcomeTokens</span><span class="p">()</span>
</pre></div>
</div>
<p>Oftentimes prediction markets aggregate predictions into more accurate predictions. Because of this, without a fee, the investor can expect to take a loss on their investments. However, too high of a fee would discourage participation in the market. Discerning the best fee factor for markets is outside the scope of this document.</p>
<p>Finally, if you are the creator of a <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/StandardMarket.html"><code class="docutils literal notranslate"><span class="pre">StandardMarket</span></code></a>, you can close the market and obtain all of its outcome token holdings with <code class="docutils literal notranslate"><span class="pre">StandardMarket.close</span></code> and/or withdraw the trading fees paid with <code class="docutils literal notranslate"><span class="pre">StandardMarket.withdrawFees</span></code>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">closeAndWithdraw</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">requireEventFromTXResult</span><span class="p">(</span><span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">close</span><span class="p">(),</span> <span class="s1">&#39;MarketClose&#39;</span><span class="p">)</span>
    <span class="nx">Gnosis</span><span class="p">.</span><span class="nx">requireEventFromTXResult</span><span class="p">(</span><span class="nx">await</span> <span class="nx">market</span><span class="p">.</span><span class="nx">withdrawFees</span><span class="p">(),</span> <span class="s1">&#39;MarketFeeWithdrawal&#39;</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">closeAndWithdraw</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="events-with-scalar-outcomes">
<span id="events-with-scalar-outcomes"></span><h2>Events with Scalar Outcomes<a class="headerlink" href="#events-with-scalar-outcomes" title="Permalink to this headline">¶</a></h2>
<p>The discussion up to this point has been about an instance of an event with categorical outcomes. However, some events may be better expressed as an event with a scalar outcome. For example, you can ask the following question using <a class="reference external" href="api-reference.html#createScalarEvent">Gnosis.createScalarEvent</a>:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">lowerBound</span> <span class="o">=</span> <span class="s1">&#39;80&#39;</span>
<span class="kr">const</span> <span class="nx">upperBound</span> <span class="o">=</span> <span class="s1">&#39;100&#39;</span>

<span class="kd">let</span> <span class="nx">ipfsHash</span><span class="p">,</span> <span class="nx">oracle</span><span class="p">,</span> <span class="nx">event</span>

<span class="nx">async</span> <span class="kd">function</span> <span class="nx">createScalarEvent</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ipfsHash</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">publishEventDescription</span><span class="p">({</span>
        <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;What will be the annual global land and ocean temperature anomaly for 2017?&#39;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;The anomaly is with respect to the average temperature for the 20th century and is as reported by the National Centers for Environmental Services...&#39;</span><span class="p">,</span>
        <span class="nx">resolutionDate</span><span class="o">:</span> <span class="s1">&#39;2017-01-01T00:00:00+00:00&#39;</span><span class="p">,</span>
        <span class="nx">lowerBound</span><span class="p">,</span>
        <span class="nx">upperBound</span><span class="p">,</span>
        <span class="nx">decimals</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">unit</span><span class="o">:</span> <span class="s1">&#39;°C&#39;</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Ipfs hash: https://ipfs.infura.io/api/v0/cat?stream-channels=true&amp;arg=</span><span class="si">${</span><span class="nx">ipfsHash</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>

    <span class="nx">oracle</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">createCentralizedOracle</span><span class="p">(</span><span class="nx">ipfsHash</span><span class="p">)</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Oracle created with address </span><span class="si">${</span><span class="nx">oracle</span><span class="p">.</span><span class="nx">address</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>

    <span class="nx">event</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">createScalarEvent</span><span class="p">({</span>
        <span class="nx">collateralToken</span><span class="o">:</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">etherToken</span><span class="p">,</span>
        <span class="nx">oracle</span><span class="p">,</span>
        <span class="c1">// Note that these bounds should match the values published on IPFS</span>
        <span class="nx">lowerBound</span><span class="p">,</span>
        <span class="nx">upperBound</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="sb">`Event created with address </span><span class="si">${</span><span class="nx">event</span><span class="p">.</span><span class="nx">address</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">createScalarEvent</span><span class="p">()</span>
</pre></div>
</div>
<p>This sets up an event with a lower bound of 0.80°C and an upper bound of 1.00°C. Note that the values are passed in as whole integers and adjusted to the right order of magnitude according to the <code class="docutils literal notranslate"><span class="pre">decimals</span></code> property of the event description.</p>
<p>There are two outcome tokens associated with this event: a short token for the lower bound and a long token for the upper bound. The short tokens associated with the lower bound have index 0, as opposed to the long tokens associated with the upper bound which have index 1. In other words, other than their value at resolution, they have the same mechanics as a categorical event with two outcomes. For example, a <code class="docutils literal notranslate"><span class="pre">market</span></code> may be created for this event in the same way, and outcome tokens traded on that market may also be traded in the same way.</p>
<p>Now let’s say that the NCES reports that the average global temperature anomaly for 2017 is 0.89°C. If you are the centralized oracle for this event as above, you can report this result to the chain like so:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">async</span> <span class="kd">function</span> <span class="nx">resolve</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">await</span> <span class="nx">gnosis</span><span class="p">.</span><span class="nx">resolveEvent</span><span class="p">({</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">outcome</span><span class="o">:</span> <span class="s1">&#39;89&#39;</span> <span class="p">})</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will value each unit of the short outcome at \(1 - {0.89 - 0.80 \over 1.00 - 0.80} = 0.55\) units of the collateral, and the long outcome at \(0.45\) units of the collateral. Thus, if you held 50 units of the short outcome and 100 units of the long outcome, <a class="reference external" href="https://gnosis-pm-contracts.readthedocs.io/en/latest/ScalarEvent.html"><code class="docutils literal notranslate"><span class="pre">ScalarEvent.redeemWinnings</span></code></a> would net you \(\lfloor 50 \times 0.55 + 100 \times 0.45 \rfloor = 72\) units of collateral. Hopefully you’ll have paid less than that for those outcomes.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lmsr-primer.html" class="btn btn-neutral float-right" title="LMSR Primer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api-overview.html" class="btn btn-neutral" title="API Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gnosis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>