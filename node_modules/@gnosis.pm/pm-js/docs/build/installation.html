

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; pm-js  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pm-js  documentation" href="index.html"/>
        <link rel="next" title="API Overview" href="api-overview.html"/>
        <link rel="prev" title="Gnosis JavaScript Library Documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pm-js
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-a-project-using-npm">Setting up a project using npm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#browser-use">Browser use</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integration-with-webpack-projects-advanced">Integration with webpack projects (advanced)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-an-ethereum-json-rpc">Setting up an Ethereum JSON RPC</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ganache-cli-and-private-chain-providers">Ganache-cli and private chain providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metamask">MetaMask</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-overview.html">API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="events-oracles-and-markets.html">Events, Oracles and Markets</a></li>
<li class="toctree-l1"><a class="reference internal" href="lmsr-primer.html">LMSR Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing-guide.html">Contributing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pm-js</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installation.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<span id="installation"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="setting-up-a-project-using-npm">
<span id="setting-up-a-project-using-npm"></span><h2>Setting up a project using npm<a class="headerlink" href="#setting-up-a-project-using-npm" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p class="first">Create a project directory, open a terminal or command line, and change directory into the project directory.</p>
</li>
<li><p class="first">Use <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">init</span></code> to set up your project.</p>
</li>
<li><p class="first">Install <a class="reference external" href="https://github.com/gnosis/pm-contracts"><code class="docutils literal notranslate"><span class="pre">pm-contracts</span></code></a> and <code class="docutils literal notranslate"><span class="pre">pm-js</span></code> into your project as a dependency using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="s1">&#39;@gnosis.pm/pm-contracts&#39;</span> <span class="s1">&#39;@gnosis.pm/pm-js&#39;</span>
</pre></div>
</div>
<p>Be sure to issue this command with this exact spelling. The quotes are there in case you use <a class="reference external" href="https://stackoverflow.com/a/5571703/1796894">Powershell</a>.</p>
<p>This command installs the Gnosis core contracts and the Gnosis JavaScript library, and their dependencies into the <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> directory. The <a class="reference external" href="https://www.npmjs.com/package/&#64;gnosis.pm/pm-js"><code class="docutils literal notranslate"><span class="pre">&#64;gnosis.pm/pm-js</span></code></a> package contains the following:</p>
<ul class="simple">
<li>ES6 source of the library in <code class="docutils literal notranslate"><span class="pre">src</span></code> which can also be found on the <a class="reference external" href="https://github.com/gnosis/pm-js">repository</a></li>
<li>Compiled versions of the modules which can be run on Node.js in the <code class="docutils literal notranslate"><span class="pre">dist</span></code> directory</li>
<li>Webpacked standalone <code class="docutils literal notranslate"><span class="pre">gnosis-pm[.min].js</span></code> files ready for use by web clients in the <code class="docutils literal notranslate"><span class="pre">dist</span></code> directory</li>
<li>API documentation in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> directory</li>
</ul>
</li>
</ol>
<p>Notice that the library refers to the <code class="docutils literal notranslate"><span class="pre">dist/index</span></code> module as the <code class="docutils literal notranslate"><span class="pre">package.json</span></code> main. This is because even though Node.js does support many new JavaScript features, ES6 import support is still very much in development yet (watch <a class="reference external" href="https://nodejs.org/api/esm.html#esm_ecmascript_modules">this page</a>), so the modules are transpiled with <a class="reference external" href="https://babeljs.io/">Babel</a> for Node interoperability.</p>
<p>In the project directory, you can experiment with the Gnosis API by opening up a <code class="docutils literal notranslate"><span class="pre">node</span></code> shell and importing the library like so:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">Gnosis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@gnosis.pm/pm-js&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will import the transpiled library through the <code class="docutils literal notranslate"><span class="pre">dist/index</span></code> entry point, which exports the <a class="reference external" href="api-reference.html#Gnosis">Gnosis</a> class.</p>
<p>If you are playing around with pm-js directly in its project folder, you can import it from dist</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">Gnosis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="browser-use">
<span id="browser-use"></span><h2>Browser use<a class="headerlink" href="#browser-use" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">gnosis-pm.js</span></code> file and its minified version <code class="docutils literal notranslate"><span class="pre">gnosis-pm.min.js</span></code> are self-contained and can be used directly in a webpage. For example, you may copy <code class="docutils literal notranslate"><span class="pre">gnosis-pm.min.js</span></code> into a folder or onto your server, and in an HTML page, use the following code to import the library:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;gnosis-pm.min.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="c1">// Gnosis should be available as a global after the above script import, so this subsequent script tag can make use of the API.</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>After opening the page, the browser console can also be used to experiment with the API.</p>
</div>
<div class="section" id="integration-with-webpack-projects-advanced">
<span id="integration-with-webpack-projects-advanced"></span><h2>Integration with webpack projects (advanced)<a class="headerlink" href="#integration-with-webpack-projects-advanced" title="Permalink to this headline">¶</a></h2>
<p>The ES6 source can also be used directly with webpack projects. Please refer to the Babel transpilation settings in <a class="reference external" href="https://github.com/gnosis/pm-js/blob/master/.babelrc"><code class="docutils literal notranslate"><span class="pre">.babelrc</span></code></a> and the webpack configuration in <a class="reference external" href="https://github.com/gnosis/pm-js/blob/master/webpack.config.js"><code class="docutils literal notranslate"><span class="pre">webpack.config.js</span></code></a> to see what may be involved.</p>
</div>
<div class="section" id="setting-up-an-ethereum-json-rpc">
<span id="setting-up-an-ethereum-json-rpc"></span><h2>Setting up an Ethereum JSON RPC<a class="headerlink" href="#setting-up-an-ethereum-json-rpc" title="Permalink to this headline">¶</a></h2>
<p>After setting up the pm-js library, you will still need a connection to an <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC">Ethereum JSON RPC</a> provider. Without this connection, the following error occurs when trying to use the API to perform actions with the smart contracts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">JSON</span> <span class="n">RPC</span> <span class="n">response</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>pm-js refers to Truffle contract build artifacts found in <code class="docutils literal notranslate"><span class="pre">node_modules/&#64;gnosis.pm/pm-contracts/build/contracts/</span></code>, which contain a registry of where key contracts are deployed given a network ID. By default Gnosis contract suite is already deployed on the Ropsten, Kovan, and Rinkeby testnets.</p>
<div class="section" id="ganache-cli-and-private-chain-providers">
<span id="ganache-cli-and-private-chain-providers"></span><h3>Ganache-cli and private chain providers<a class="headerlink" href="#ganache-cli-and-private-chain-providers" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/trufflesuite/ganache-cli">Ganache-cli</a> is a JSON RPC provider which is designed to ease developing Ethereum dapps. It can be used in tandem with pm-js as well, but its use requires some setup. Since Ganache-cli randomly generates a network ID and begins the Ethereum VM in a blank state, the contract suite would need to be deployed, and the deployed contract addresses recorded in the build artifacts before use with Ganache-cli. This can be done by running the migration script in the core contracts package directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="nb">cd</span> node_modules/<span class="se">\@</span>gnosis.pm/pm-contracts/ <span class="o">&amp;&amp;</span> truffle migrate<span class="o">)</span>
</pre></div>
</div>
<p>This will deploy the contracts onto the chain and will record the deployed addresses in the contract build artifacts. This will make the API available to pm-js applications which use the transpiled <em>modules</em> in <code class="docutils literal notranslate"><span class="pre">dist</span></code> (typically Node.js apps), as these modules refer directly to the build artifacts in the <code class="docutils literal notranslate"><span class="pre">&#64;gnosis.pm/pm-contracts</span></code> package. However, for browser applications which use the standalone library file <code class="docutils literal notranslate"><span class="pre">gnosis-pm[.min].js</span></code>, that file has to be rebuilt to incorporate the new deployment addresses info.</p>
</div>
<div class="section" id="metamask">
<span id="metamask"></span><h3>MetaMask<a class="headerlink" href="#metamask" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://metamask.io/">MetaMask</a> is a Chrome browser plugin which injects an instrumented instance of Web3.js into the page. It comes preloaded with connections to the Ethereum mainnet as well as the Ropsten, Kovan, and Rinkeby testnets through <a class="reference external" href="https://infura.io/">Infura</a>. pm-js works out-of-the-box with MetaMask configured to connect to these testnets. Make sure your web page is being <a class="reference external" href="https://github.com/MetaMask/faq/blob/master/DEVELOPERS.md">served over HTTP/HTTPS</a> and uses the standalone library file.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api-overview.html" class="btn btn-neutral float-right" title="API Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Gnosis JavaScript Library Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gnosis.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>